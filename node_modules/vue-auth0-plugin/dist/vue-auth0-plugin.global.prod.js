/*!
  * vue-auth0-plugin v0.0.0-semantically-released
  */
var VueAuth0Plugin=function(t,e,i){"use strict";const n=e.reactive({loading:!0,authenticated:!1,getAuthenticatedAsPromise:()=>new Promise((t=>{const i=e.watch((()=>n.loading),(async()=>{n.loading||(i(),t(n.authenticated))}))})),user:void 0,popupOpen:!1,error:void 0}),a=e.reactive({authenticated:!1,getAuthenticatedAsPromise:n.getAuthenticatedAsPromise,loading:!0,user:void 0,client:void 0,error:void 0,getIdTokenClaims:function(){return o.getIdTokenClaims()},getTokenSilently:function(t){return o.getTokenSilently(t)},getTokenWithPopup:function(t,e){return o.getTokenWithPopup(t,e)},loginWithRedirect:function(t){return o.loginWithRedirect(t)},loginWithPopup:async function(t,e){n.popupOpen=!0,n.loading=!0,n.error=void 0;try{await o.loginWithPopup(t,e)}catch(t){n.error=t}finally{n.popupOpen=!1,n.loading=!1,n.user=await o.getUser(),n.authenticated=await o.isAuthenticated()}},logout:function(t){return o.logout(t)}});let o;Object.defineProperties(a,{authenticated:{get:()=>n.authenticated,enumerable:!1},loading:{get:()=>n.loading,enumerable:!1},user:{get:()=>n.user,enumerable:!1},error:{get:()=>n.error,enumerable:!1}});var r={state:n,properties:a,initialize:async function(t,e,i){if(o=e,a.client=o,(void 0===i||window.location.href.split("?")[0]===i)&&(window.location.search.includes("state=")||window.location.search.includes("code="))){let e;try{e=(await o.handleRedirectCallback()).appState}catch(t){n.error=t}finally{const i=e&&e.targetUrl?e.targetUrl:"/";t.config.globalProperties.$router?t.config.globalProperties.$router.push(i):window.location.replace(i)}}n.authenticated=await o.isAuthenticated(),n.user=await o.getUser(),n.loading=!1}};var c=async(t,i,n)=>{const a=async()=>!!r.state.authenticated||(n&&await r.properties.loginWithRedirect({appState:{targetUrl:t.fullPath}}),!1);return r.state.loading?new Promise((t=>{const i=e.watch((()=>r.state.loading),(async()=>{r.state.loading||(i(),t(a()))}))})):a()};const u="auth";var l={install(t,e){t.provide(u,r.properties);const n=new i.Auth0Client(e);r.initialize(t,n,e.authorizationParams?.redirect_uri)}};const s=r.state,d=r.properties;return t.AuthenticationGuard=async(t,e)=>c(t,0,!0),t.AuthenticationGuardWithoutLoginRedirect=async(t,e)=>c(t,0,!1),t.AuthenticationProperties=d,t.AuthenticationState=s,t.default=l,t.injectAuth=()=>e.inject(u),t.injectionKey=u,Object.defineProperty(t,"__esModule",{value:!0}),t}({},Vue,Auth0SpaJS);
